<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="darkx light">

    <link rel="icon" href="./favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.sand.min.css">

    <style>
        body { padding-bottom: 10rem; }
        nav strong:first-of-type { font-size: 130%; white-space: nowrap; color: var(--pico-primary); }
        h1, h2 { display: none; }
        h3 { font-size: inherit; margin: 0 0 .5rem; }
        details summary { font-weight: bold; }
        details summary:hover { color: var(--pico-primary); }
        table { font-size: 80%; }
        td { vertical-align: top; }
        li { vertical-align: middle; }
        code { white-space: nowrap; }
        img.logo { width: 150px; border-radius: 50%; margin-right: 15px; }
        footer { margin-top: 3rem; text-align: center; }
    </style>

    <title>Data the Discord Bot</title>
</head>
<body>
    <header class="container">
        <nav>
            <ul>
                <li>
                    <img class="logo" src="./data.png" alt="Data himself">
                    <strong>Data the Discord Bot</strong>
                </li>
            </ul>
            <ul>
                <li title="current live version - see changelog">v1.0.0</li>
                <li title="uptime monitor"><a href="https://status.ourspace.ch/status/dardbot">status</a></li>
            </ul>
        </nav>
    </header>


    <main class="container">
        <details>
            <h2>Usage</h2>
            <summary>[ usage ]</summary>

            <p>
                To start, type <code>/</code> in the message input box, and then look for Data's commands in the list that will pop-up.<br>
                On the left side of the commands list should be Data's avatar visible - click on it to show only his commands.<br>
                <img src="./doc1.png" alt="1">
            </p>

            <p>
                Automatic documentation is provided once you start using a command.<br>
                <img src="./doc2.png" alt="2">
            </p>

            <p>
                Server admins can adjust usage permission in the server integrations settings.<br>
                <img src="./doc3.png" alt="3">
            </p>

        </details>

        <hr>

        <details>
            <h2>Commands</h2>
            <summary>[ commands ]</summary>

            <table>
                <thead>
                    <tr>
                        <th>Command</th>
                        <th>Options</th>
                        <th>Description</th>
                        <th>Response Visibility</th>
                    </tr>
                </thead>
                <tbody class="cmd_doc"></tbody>
            </table>
        </details>

        <hr>

        <details>
            <h2>Changelog</h2>
            <summary>[ changelog ]</summary>

            <p>Whenever a new version goes live, the changes that affect users will be reported here.</p>

            <h3>v1.0.0 - 2025-01-28</h3>
            <ul>
                <li>Removed: <code>sysinfo</code> command response does not include CPU and shell users counts anymore.</li>
                <li>Changed: <code>echo</code> command response does not suppress embeds anymore.</li>
                <li>Added: <code>sysinfo</code> command response now also includes bot uptime.</li>
            </ul>

            <h3>beta3.3 - 2025-01-21</h3>
            <ul>
                <li>Changed: <code>kticker</code> command response cosmetics.</li>
            </ul>

            <h3>beta3.2 - 2025-01-03</h3>
            <ul>
                <li>Changed: <code>music</code>, <code>qrcode</code>, <code>rhyme</code> and <code>time</code> responses are now only visible to the user that invoked the command. Reasoning was "to reduce bot spam".</li>
                <li>Added: <code>dice</code> command.</li>
            </ul>

            <h3>beta3.1 - 2024-11-28</h3>
            <ul>
                <li>Added: <code>kticker</code> command.</li>
            </ul>

            <h3>beta3 - 2024-11-24</h3>
            <ul>
                <li>Removed: <code>anto</code> command.</li>
                <li>Removed: <code>dict</code> command.</li>
                <li>Removed: <code>help</code> command.</li>
                <li>Removed: <code>syno</code> command.</li>
                <li>Removed: <code>tcmd</code> command.</li>
                <li>Changed: <code>sys</code> command renamed to <code>sysinfo</code>.</li>
                <li>Added: <code>echo</code> command.</li>
            </ul>

            <h3>beta2 - 2024-11-16</h3>
            <ul>
                <li>Removed: <code>animal</code> command.</li>
                <li>Changed: <code>music</code> command behaviour and arguments.</li>
                <li>Added: <code>anto</code> command.</li>
                <li>Added: <code>cat</code> command.</li>
                <li>Added: <code>qrcode</code> command.</li>
                <li>Added: <code>rhyme</code> command.</li>
                <li>Added: <code>syno</code> command.</li>
                <li>Added: <code>tcmd</code> command.</li>
            </ul>

            <h3>beta1  - 2024-11-06</h3>
            <ul>
                <li>Added: <code>animal</code> command.</li>
                <li>Added: <code>enigma</code> command.</li>
                <li>Added: <code>help</code> command.</li>
                <li>Added: <code>leet</code> command.</li>
                <li>Added: <code>music</code> command.</li>
                <li>Added: <code>quote</code> command.</li>
                <li>Added: <code>sys</code> command.</li>
                <li>Added: <code>time</code> command.</li>
            </ul>
        </details>

        <hr>

        <details>
            <h2>About</h2>
            <summary>[ about ]</summary>

            <p>
                Made upon request
                by <a href="https://etrusci.org" target="_blank">arT2</a>
                for <a href="https://vrchat.com/home/user/usr_3519790d-ed85-4cd1-965e-ffb99ba003e0" target="_blank">FoxyFoo</a>
                and her circle.
            </p>
            <p>
                <strong>Privacy:</strong>
                Currently the bot does not retain any history of conversations or activities.
                In the future, this may change if features like generating statistics or other enhancements are introduced; however, this will be reflected in the changelog.
                In any case no user data is shared with or sold to third parties.
            </p>
        </details>

        <hr>
    </main>


    <footer class="container">
        <p>
            Data is currently active in these awesome communities:<br>
            <a href="https://vrc.group/THEDEN.1431" target="_blank"><img class="logo" src="./logo-theden.png" alt="The DEN"></a>
        </p>
    </footer>


    <script>
        // @ts-check
        const render_cmd_doc = (data) => {
            const target = document.querySelector('.cmd_doc')

            for (const cmd_key in data.command) {
                const tr = document.createElement('tr')
                const td1 = document.createElement('td')
                const td2 = document.createElement('td')
                const td3 = document.createElement('td')
                const td4 = document.createElement('td')

                const opt = []
                for (const opt_key in data.command[cmd_key].option) {
                    opt.push(`<code>${opt_key}</code> ${data.command[cmd_key].option[opt_key]}`)
                }

                let description_extra = ''
                if (cmd_key == 'time') {
                    description_extra = `<br>For an overview of timezones to query see <a href="./timezones.txt">timezones.txt</a>. Data may already know newer items when you invoke this command, so some zones may not yet be listed in this file.`
                }
                else if (cmd_key == 'kticker') {
                    description_extra = `<br>For an overview of asset pairs to query see <a href="./assetpairs.txt">assetpairs.txt</a>. Data may already know newer items when you invoke this command, so some asset pairs may not yet be listed in this file.`
                }

                td1.innerHTML = `<code>/${cmd_key}</code>`
                td2.innerHTML = opt.join('<br>')
                td3.innerHTML = data.command[cmd_key].description + description_extra
                td4.innerHTML = `${data.command[cmd_key]['public_response'] ? 'Public' : 'Private'}`

                tr.append(td1, td2, td3, td4)

                target?.append(tr)
            }
        }

        window.addEventListener('load', () => {
            fetch('./doc.json', { cache: 'no-cache' })
            .then(response => response.json())
            .then((data) => render_cmd_doc(data))
            .catch(error => console.error('Boo:', error))
        })
    </script>
</body>
</html>
